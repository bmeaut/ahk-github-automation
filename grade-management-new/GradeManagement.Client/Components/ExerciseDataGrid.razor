@inject ExerciseClient ExerciseClient

<MudDataGrid T="Exercise2" Items="Values" EditMode="DataGridEditMode.Form" ReadOnly="false" CommittedItemChanges="@CommittedItemChanges" Style="width: 100%">
    <Columns>
        <PropertyColumn Property="x => x.Id" Title="Id" Editable="false"/>
        <PropertyColumn Property="x => x.Name" Title="Name"/>
        <PropertyColumn Property="x => x.GithubPrefix" Title="Github Prefix"/>
        <PropertyColumn Property="x => x.DueDate" Title="Due Date"/>
        <PropertyColumn Property="x => JoinScoreTypes(x)" Title="Score Types"/>
        <DataGridActions TItem="Exercise2" OnEditItem="@StartEditing" OnDeleteItem="@DeleteItem"/>
    </Columns>
</MudDataGrid>


@code {
    [Parameter] public ICollection<Exercise2> Values { get; set; }

    private string JoinScoreTypes(Exercise2 item) => string.Join(", ", item.ScoreTypes.Select(x => $"{x.Key}: {x.Value}"));

    private async Task StartEditing(CellContext<Exercise2?> context)
    {
        await context.Actions.StartEditingItemAsync();
        StateHasChanged();
    }

    private async Task CommittedItemChanges(Exercise2 items)
    {
        await ExerciseClient.UpdateAsync(items.Id, items);
    }

    private async Task DeleteItem(Exercise2 item)
    {
        Values.Remove(item);
        await ExerciseClient.DeleteAsync(item.Id);
        StateHasChanged();
    }

}
