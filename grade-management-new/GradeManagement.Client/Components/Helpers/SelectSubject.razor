@using GradeManagement.Shared.Dtos.Response
@inject HttpClient Http
@inject SubjectService SubjectService

<MudSelect T="Subject" Value="@Value" ValueChanged="@((Subject value) => { Value = value; ValueChanged.InvokeAsync(value); })" ToStringFunc="@subjectToString" Label="Subject" Style="background-color: white;" Dense="true" Variant="Variant.Filled" AnchorOrigin="Origin.BottomCenter" TransformOrigin="Origin.TopCenter">
    @foreach (var semester in _subjects)
    {
        <MudSelectItem Value="@semester"/>
    }
</MudSelect>

@code {
    [Parameter] public Subject Value { get; set; }
    [Parameter] public EventCallback<Subject> ValueChanged { get; set; }

    Func<Subject, string> subjectToString = p => p.Name;
    private List<Subject> _subjects = new();

    private async Task<List<Subject>> LoadSubjects()
    {
        return await SubjectService.LoadSubjects();
    }

    protected override async Task OnInitializedAsync()
    {
        _subjects = await LoadSubjects();
    }

}
